<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cookit – Simple Recipe Finder</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #0f172a;
      --card: #111827;
      --accent: #22c55e;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --radius: 16px;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: Inter, system-ui, -apple-system, sans-serif;
      background: linear-gradient(180deg, #020617, #0f172a);
      color: var(--text);
      min-height: 100vh;
    }

    header {
      padding: 32px 20px 24px;
      text-align: center;
    }

    header h1 {
      margin: 0;
      font-size: 2rem;
      font-weight: 700;
      letter-spacing: -0.02em;
    }

    header p {
      margin-top: 8px;
      color: var(--muted);
      font-size: 0.95rem;
    }

    .search-panel {
      max-width: 900px;
      margin: 0 auto 28px;
      padding: 0 16px;
      display: grid;
      gap: 16px;
    }

    .search-row {
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 12px;
    }

    input {
      padding: 14px 16px;
      border-radius: 12px;
      border: none;
      outline: none;
      background: #020617;
      color: var(--text);
      border: 1px solid #1f2933;
      font-size: 1rem;
    }

    button {
      padding: 14px 18px;
      border-radius: 12px;
      border: none;
      cursor: pointer;
      font-weight: 600;
      background: var(--accent);
      color: #052e16;
      font-size: 0.95rem;
    }

    button.secondary {
      background: #1f2937;
      color: var(--text);
      border: 1px solid #374151;
    }

    .results {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 16px 40px;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 20px;
    }

    .card {
      background: radial-gradient(120% 120% at 10% 0%, #1f2937, var(--card));
      border-radius: var(--radius);
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0,0,0,.4);
      display: flex;
      flex-direction: column;
      transition: transform .2s ease, box-shadow .2s ease;
    }

    .card:hover {
      transform: translateY(-4px);
      box-shadow: 0 16px 40px rgba(0,0,0,.55);
    }

    .card img {
      width: 100%;
      height: 180px;
      object-fit: cover;
    }

    .card-body {
      padding: 14px 14px 16px;
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .card-body h3 {
      font-size: 1rem;
      margin: 0;
      font-weight: 600;
    }

    .card-body span {
      font-size: 0.8rem;
      color: var(--muted);
    }

    .card-body button {
      margin-top: auto;
      width: 100%;
    }

    .empty {
      text-align: center;
      grid-column: 1 / -1;
      color: var(--muted);
      padding: 32px 0;
    }

    /* Modal */
    .modal {
      position: fixed;
      inset: 0;
      background: rgba(2,6,23,.85);
      display: none;
      justify-content: center;
      align-items: flex-start;
      padding: 20px 12px;
      overflow-y: auto;
      z-index: 50;
    }

    .modal-content {
      background: linear-gradient(180deg, #020617, #111827);
      max-width: 900px;
      width: 100%;
      border-radius: 18px;
      padding: 20px 18px 24px;
      box-shadow: 0 20px 60px rgba(0,0,0,.6);
      position: relative;
    }

    .close-btn {
      position: absolute;
      top: 12px;
      right: 14px;
      background: #1f2937;
      color: white;
      border: 1px solid #374151;
      padding: 6px 10px;
      border-radius: 10px;
      cursor: pointer;
      font-size: 0.8rem;
    }

    .recipe-header {
      display: grid;
      grid-template-columns: 1fr;
      gap: 16px;
    }

    .recipe-header img {
      width: 100%;
      border-radius: 14px;
      max-height: 360px;
      object-fit: cover;
    }

    .recipe-info h2 {
      margin: 0 0 6px;
    }

    .recipe-info p {
      margin: 0;
      color: var(--muted);
    }

    .recipe-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 24px;
      margin-top: 22px;
    }

    .ingredients ul {
      margin: 10px 0 0;
      padding-left: 18px;
    }

    .instructions {
      white-space: pre-line;
      line-height: 1.6;
      font-size: 0.95rem;
      color: #d1d5db;
    }

    @media (min-width: 768px) {
      header h1 { font-size: 2.4rem; }

      .recipe-header {
        grid-template-columns: 360px 1fr;
        align-items: start;
      }

      .recipe-grid {
        grid-template-columns: 320px 1fr;
      }
    }

    footer {
      text-align: center;
      padding: 24px 10px 30px;
      font-size: 0.8rem;
      color: var(--muted);
    }
  </style>
</head>
<body>
  <header>
    <h1>Cookit</h1>
    <p>Find recipes fast or ask Cookit for ideas using a natural prompt.</p>
  </header>

  <section class="search-panel">
    <div class="search-row">
      <input id="searchInput" type="text" placeholder="Search by meal name (e.g., chicken, pasta)" />
      <button id="searchBtn">Search</button>
    </div>

    <div class="search-row">
      <input id="aiInput" type="text" placeholder="AI-style prompt (e.g., high-protein chicken dinner)" />
      <button id="aiBtn" class="secondary">AI Suggest</button>
    </div>
  </section>

  <main id="results" class="results"></main>

  <!-- Modal -->
  <div id="modal" class="modal">
    <div class="modal-content">
      <button class="close-btn" onclick="closeModal()">Close</button>
      <div id="recipeDetail"></div>
    </div>
  </div>

  <footer>
    Powered by TheMealDB (free public API). Cookit is ready for GitHub Pages deployment.
  </footer>

  <script>
    const resultsEl = document.getElementById('results');
    const searchBtn = document.getElementById('searchBtn');
    const searchInput = document.getElementById('searchInput');
    const aiBtn = document.getElementById('aiBtn');
    const aiInput = document.getElementById('aiInput');

    searchBtn.addEventListener('click', () => {
      const query = searchInput.value.trim();
      if (!query) return;
      searchMeals(query);
    });

    searchInput.addEventListener('keydown', e => {
      if (e.key === 'Enter') searchBtn.click();
    });

    aiBtn.addEventListener('click', () => {
      const prompt = aiInput.value.trim();
      if (!prompt) return;

      // --- SIMPLE "AI-LIKE" MAPPING ---
      // This simulates AI behavior using keyword detection so it works for free on GitHub Pages.
      // You can replace this with a real OpenAI call later.
      const lower = prompt.toLowerCase();

      let keyword = 'chicken';
      if (lower.includes('beef')) keyword = 'beef';
      if (lower.includes('vegetarian') || lower.includes('veggie')) keyword = 'vegetable';
      if (lower.includes('pasta')) keyword = 'pasta';
      if (lower.includes('seafood')) keyword = 'fish';

      searchMeals(keyword);
    });

    async function searchMeals(query) {
      resultsEl.innerHTML = '<div class="empty">Searching...</div>';
      try {
        const res = await fetch(`https://www.themealdb.com/api/json/v1/1/search.php?s=${encodeURIComponent(query)}`);
        const data = await res.json();

        if (!data.meals) {
          resultsEl.innerHTML = '<div class="empty">No recipes found.</div>';
          return;
        }

        resultsEl.innerHTML = data.meals.map(meal => `
          <div class="card">
            <img src="${meal.strMealThumb}" alt="${meal.strMeal}" />
            <div class="card-body">
              <h3>${meal.strMeal}</h3>
              <span>${meal.strCategory || ''} • ${meal.strArea || ''}</span>
              <button onclick="openRecipe('${meal.idMeal}')">View Recipe</button>
            </div>
          </div>
        `).join('');
      } catch (err) {
        resultsEl.innerHTML = '<div class="empty">Error loading recipes.</div>';
      }
    }

    async function openRecipe(id) {
      const modal = document.getElementById('modal');
      const detail = document.getElementById('recipeDetail');

      detail.innerHTML = 'Loading recipe...';
      modal.style.display = 'flex';

      try {
        const res = await fetch(`https://www.themealdb.com/api/json/v1/1/lookup.php?i=${id}`);
        const data = await res.json();
        const meal = data.meals[0];

        const ingredients = [];
        for (let i = 1; i <= 20; i++) {
          const ing = meal[`strIngredient${i}`];
          const meas = meal[`strMeasure${i}`];
          if (ing && ing.trim()) ingredients.push(`${meas} ${ing}`);
        }

        detail.innerHTML = `
          <div class="recipe-header">
            <img src="${meal.strMealThumb}" alt="${meal.strMeal}" />
            <div class="recipe-info">
              <h2>${meal.strMeal}</h2>
              <p>${meal.strCategory || ''} • ${meal.strArea || ''}</p>
            </div>
          </div>

          <div class="recipe-grid">
            <div class="ingredients">
              <h3>Ingredients</h3>
              <ul>
                ${ingredients.map(i => `<li>${i}</li>`).join('')}
              </ul>
            </div>

            <div>
              <h3>Directions</h3>
              <div class="instructions">${meal.strInstructions}</div>
            </div>
          </div>
        `;
      } catch (err) {
        detail.innerHTML = 'Error loading recipe.';
      }
    }

    function closeModal() {
      document.getElementById('modal').style.display = 'none';
    }

    // Initial example load
    searchMeals('chicken');
  </script>
</body>
</html>
